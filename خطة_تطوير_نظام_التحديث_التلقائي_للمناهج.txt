# خطة تطوير نظام التتبع اليومي للمناهج والتقدم التلقائي

## تاريخ إنشاء الخطة: 7 يونيو 2025
## تاريخ آخر تحديث: 7 يونيو 2025 - الساعة 15:30

===================================================
## المرحلة الأولى: نظام التتبع اليومي للمناهج
===================================================
[✓] المرحلة مكتملة بنسبة 100%

### الإنجازات المكتملة:
- ✅ خدمة التتبع اليومي بوظائف متقدمة
- ✅ إضافة حقول التتبع اليومي لقاعدة البيانات
- ✅ نموذج إدارة التتبع اليومي
- ✅ تشغيل migration بنجاح وإضافة الحقول الجديدة

### 1.1 إنشاء خدمة التتبع اليومي (DailyCurriculumTrackingService)
[✓] تم التنفيذ بنجاح
- إنشاء ملف: app/Services/DailyCurriculumTrackingService.php
- وظائف التتبع اليومي:
  • تحديد ما يجب على الطالب تسميعه غداً بناءً على المنهج الحالي
  • عرض ما على الطالب تسميعه اليوم للمعلم
  • تحديث حالة التقدم في المنهج بعد كل جلسة
  • حساب نسبة إكمال المنهج الحالي

### 1.2 إضافة حقول جديدة لجدول StudentProgress
[✓] تم التنفيذ بنجاح
- إنشاء migration: 2025_06_07_063233_add_daily_tracking_fields_to_student_progress_table.php
- تم إضافة الحقول التالية:
  • today_recitation_content (JSON) - محتوى تسميع اليوم
  • tomorrow_recitation_content (JSON) - محتوى تسميع الغد
  • today_date (DATE) - تاريخ اليوم
  • tomorrow_date (DATE) - تاريخ الغد
  • today_status (ENUM) - حالة اليوم (pending, in_progress, completed, missed)
  • today_completion_percentage (DECIMAL) - نسبة إكمال اليوم
  • last_recitation_session_id (معرف آخر جلسة تسميع)
  • daily_tracking_updated_at (وقت آخر تحديث للتتبع اليومي)

### 1.3 إنشاء نموذج التتبع اليومي (DailyRecitationTracker)
[✓] تم التنفيذ بنجاح
- إنشاء model: app/Models/DailyRecitationTracker.php
- الوظائف المتاحة:
  • getStudentsForTodayRecitation() - عرض الطلاب الذين لديهم تسميع اليوم
  • updateDailyRecitationStatus() - تحديث حالة التسميع اليومي
  • moveToNextDay() - الانتقال لليوم التالي تلقائياً
  • getCompletionPercentage() - حساب نسبة الإكمال

===================================================
## المرحلة الثانية: تطوير نظام التنبيهات المرن للانتقال بين المستويات
===================================================
[✓] المرحلة مكتملة بنسبة 100%

### الإنجازات المكتملة:
- ✅ إنشاء جدول curriculum_alerts مع جميع الحقول المطلوبة
- ✅ إنشاء نموذج CurriculumAlert مع العلاقات والوظائف
- ✅ تطوير خدمة FlexibleCurriculumService مع آليات التقييم المتقدمة
- ✅ إنشاء خدمة FlexibleProgressionService لإدارة الانتقال المرن

### 2.1 إنشاء خدمة إدارة المناهج المرنة (FlexibleCurriculumService)
[✓] تم التنفيذ والتطوير بنجاح
- إنشاء ملف: app/Services/FlexibleCurriculumService.php
- وظائف إدارة المناهج المرنة المتقدمة:
  • تحليل أداء الطالب مع معايير متعددة
  • اقتراح المستوى التالي للطالب (بدون إجبار)
  • تقييم الطلاب النشطين تلقائياً
  • إنشاء التنبيهات المرنة بناءً على الأداء
  • معالجة قرارات المعلمين
  • تطبيق تغييرات المناهج بأمان
  • التكامل مع نظام التتبع اليومي

### 2.2 إنشاء نموذج التنبيهات والاقتراحات (CurriculumAlert)
[✓] تم التنفيذ بنجاح
- إنشاء migration: 2025_06_07_064139_create_curriculum_alerts_table
- إنشاء model: app/Models/CurriculumAlert.php
- الحقول المطلوبة:
  • student_id (معرف الطالب)
  • current_curriculum_id (المنهج الحالي)
  • suggested_curriculum_id (المنهج المقترح)
  • alert_type (نوع التنبيه: level_progression_suggestion, improvement_needed, etc.)
  • alert_message (رسالة التنبيه)
  • performance_summary (ملخص الأداء بصيغة JSON)
  • teacher_decision (قرار المعلم: approved/rejected/pending)
  • decision_notes (ملاحظات القرار)
  • decided_at (تاريخ اتخاذ القرار)
- العلاقات والوظائف:
  • علاقة مع Student, Curriculum
  • وظائف إدارة دورة حياة التنبيه
  • scopes للبحث والفلترة

### 2.3 تطوير آلية الانتقال المرن مع التنبيهات
[✓] تم التنفيذ بنجاح
- إنشاء ملف: app/Services/FlexibleProgressionService.php
- نظام التقييم المتقدم:
  • تجميع معايير التقييم الشاملة (أداء المنهج، الجلسات، التتبع اليومي، الجودة)
  • حساب نقاط الاستعداد بنظام متطور (100 نقطة)
  • تحديد مستوى الاستعداد (ممتاز، جيد جداً، جيد، يحتاج تحسين، غير مستعد)
  • تنفيذ عملية الانتقال مع حفظ البيانات السابقة
  • إنشاء الخطوات التالية المُوصاة لكل مستوى

===================================================
## المرحلة الثالثة: تطوير نظام الإشعارات التلقائية
===================================================
[✓] المرحلة مكتملة بنسبة 100%

### الإنجازات المكتملة:
- ✅ إنشاء خدمة الإشعارات التلقائية الشاملة
- ✅ تطوير نظام إشعارات متدرج حسب الأولوية
- ✅ إنشاء Commands للمهام اليومية والأسبوعية
- ✅ تطوير آلية التقارير والتذكيرات التلقائية

### 3.1 إنشاء خدمة الإشعارات (AutomatedNotificationService)
[✓] تم التنفيذ بنجاح
- إنشاء ملف: app/Services/AutomatedNotificationService.php
- أنواع الإشعارات المطورة:
  • إشعارات التنبيهات الجديدة للمعلمين (حسب الأولوية)
  • التقارير اليومية للأداء
  • تذكيرات للطلاب المتأخرين في التسميع
  • التقارير الأسبوعية الشاملة
  • إشعارات فورية للحالات العاجلة
  • إشعارات عادية للمتابعة الروتينية

### 3.2 تطوير نظام الإشعارات المتدرج
[✓] تم التنفيذ بنجاح
- نظام أولويات متقدم:
  • أولوية عالية: إشعارات فورية (بريد + رسائل نصية + داخل النظام)
  • أولوية متوسطة: إشعارات عادية (بريد + داخل النظام)
  • أولوية منخفضة: إشعارات داخل النظام فقط
- تجميع التنبيهات حسب الأولوية والنوع
- إعدادات مخصصة لكل مستخدم للإشعارات

### 3.3 إنشاء Commands للمهام التلقائية
[✓] تم التنفيذ بنجاح
- إنشاء command: app/Console/Commands/ProcessDailyCurriculumTasks.php
- إنشاء command: app/Console/Commands/ProcessWeeklyCurriculumTasks.php
- المهام اليومية:
  • تقييم جميع الطلاب النشطين
  • إرسال الإشعارات الجديدة
  • إرسال التذكيرات للطلاب المتأخرين
  • إرسال التقارير اليومية
- المهام الأسبوعية:
  • إرسال التقارير الأسبوعية
  • تنظيف التنبيهات المنتهية الصلاحية
  • تحليل الأداء الأسبوعي

===================================================
## المرحلة الرابعة: تطوير API للتكامل مع الموقع الخارجي
===================================================

### 4.1 إنشاء Controllers للـ API الجديد
[ ] لم يتم التنفيذ بعد
- إنشاء ملف: app/Http/Controllers/Api/CurriculumApiController.php
- إنشاء ملف: app/Http/Controllers/Api/StudentProgressApiController.php
- إنشاء ملف: app/Http/Controllers/Api/NotificationApiController.php

### 4.2 تطوير API Endpoints الجديدة
[ ] لم يتم التنفيذ بعد
- إضافة المسارات التالية في routes/api.php:
  • GET /api/student/{id}/current-curriculum - عرض المنهج الحالي
  • GET /api/student/{id}/progress-summary - ملخص التقدم
  • GET /api/student/{id}/performance-analysis - تحليل الأداء
  • POST /api/curriculum/evaluate-student/{id} - تقييم الطالب تلقائياً
  • GET /api/notifications/curriculum-changes - إشعارات تغيير المناهج
  • POST /api/curriculum/manual-override - تغيير يدوي للمنهج (للحالات الخاصة)

### 4.3 تطوير Response Resources للـ API
[ ] لم يتم التنفيذ بعد
- إنشاء resource classes:
  • app/Http/Resources/CurriculumDetailResource.php
  • app/Http/Resources/StudentProgressSummaryResource.php
  • app/Http/Resources/PerformanceAnalysisResource.php
  • app/Http/Resources/CurriculumChangeNotificationResource.php

===================================================
## المرحلة الخامسة: تطوير آلية المعالجة التلقائية
===================================================

### 5.1 إنشاء Event Listener لمعالجة جلسات التسميع
[ ] لم يتم التنفيذ بعد
- تعديل model RecitationSession لإطلاق events
- إنشاء listener: app/Listeners/ProcessRecitationSession.php
- المعالجة التلقائية بعد كل جلسة:
  • تحديث إحصائيات الأداء
  • فحص شروط الترقية
  • تحديث حالة التقدم
  • إرسال الإشعارات المناسبة

### 5.2 إنشاء Jobs للمعالجة المؤجلة
[ ] لم يتم التنفيذ بعد
- إنشاء jobs:
  • app/Jobs/EvaluateStudentPerformance.php
  • app/Jobs/CheckPromotionEligibility.php
  • app/Jobs/UpdateCurriculumProgress.php
  • app/Jobs/SendCurriculumNotifications.php

### 5.3 إنشاء Scheduled Tasks للمراجعة الدورية
[ ] لم يتم التنفيذ بعد
- تعديل app/Console/Kernel.php لإضافة:
  • مراجعة أداء الطلاب أسبوعياً
  • فحص الطلاب المؤهلين للترقية شهرياً
  • تنظيف الإشعارات القديمة
  • إرسال تقارير دورية للمعلمين

===================================================
## المرحلة السادسة: إنشاء واجهات إدارية للمتابعة
===================================================

### 6.1 إنشاء صفحات Filament لإدارة المناهج
[ ] لم يتم التنفيذ بعد
- إنشاء resource: app/Filament/Admin/Resources/CurriculumChangeLogResource.php
- إنشاء resource: app/Filament/Admin/Resources/EvaluationCriteriaResource.php
- إنشاء widgets لعرض إحصائيات التغييرات

### 6.2 تطوير Dashboard للمتابعة
[ ] لم يتم التنفيذ بعد
- إنشاء صفحة: app/Filament/Admin/Pages/CurriculumManagementDashboard.php
- عرض البيانات التالية:
  • عدد الطلاب المؤهلين للترقية
  • الطلاب الذين تم ترقيتهم مؤخراً
  • الطلاب الذين يحتاجون مراجعة إضافية
  • إحصائيات الأداء العامة

===================================================
## المرحلة السابعة: معالجة الحالات الخاصة
===================================================

### 7.1 آلية التعامل مع التسميع الجزئي
[ ] لم يتم التنفيذ بعد
- إضافة حقل partial_recitation في جدول RecitationSession
- تطوير آلية لحساب النسبة المكملة من المنهج
- إنشاء تقارير للمتابعة مع المعلم

### 7.2 نظام التغيير اليدوي للمنهج
[ ] لم يتم التنفيذ بعد
- إضافة صلاحيات خاصة للمعلمين والمشرفين
- إنشاء forms للتغيير اليدوي مع تبرير
- تسجيل التغييرات اليدوية في CurriculumChangeLog

### 7.3 آلية المراجعة الإضافية
[ ] لم يتم التنفيذ بعد
- إنشاء نظام لتحديد الطلاب الذين يحتاجون مراجعة
- إنشاء خطط مراجعة مخصصة
- متابعة تقدم المراجعة الإضافية

===================================================
## المرحلة الثامنة: الاختبار والتحسين
===================================================

### 8.1 إنشاء اختبارات الوحدة (Unit Tests)
[ ] لم يتم التنفيذ بعد
- اختبار خدمة تقييم الأداء
- اختبار آلية الترقية التلقائية
- اختبار API endpoints الجديدة

### 8.2 إنشاء اختبارات التكامل (Integration Tests)
[ ] لم يتم التنفيذ بعد
- اختبار التكامل مع الموقع الخارجي
- اختبار عملية التسميع الكاملة من البداية للنهاية
- اختبار الإشعارات والتنبيهات

### 8.3 إجراء اختبارات الأداء
[ ] لم يتم التنفيذ بعد
- اختبار الأداء مع عدد كبير من الطلاب
- تحسين استعلامات قاعدة البيانات
- تحسين سرعة الاستجابة للـ API

===================================================
## المرحلة التاسعة: التوثيق والتسليم
===================================================

### 9.1 كتابة التوثيق الفني
[ ] لم يتم التنفيذ بعد
- توثيق API endpoints الجديدة
- كتابة دليل استخدام النظام
- توثيق معايير التقييم والترقية

### 9.2 إنشاء دليل المستخدم
[ ] لم يتم التنفيذ بعد
- دليل للمعلمين حول النظام الجديد
- دليل للمشرفين حول متابعة التقدم
- دليل للمطورين للتكامل مع الموقع الخارجي

### 9.3 التدريب والتسليم
[ ] لم يتم التنفيذ بعد
- تدريب المعلمين على النظام الجديد
- تدريب الإدارة على لوحات المتابعة
- تسليم النظام للاستخدام الفعلي

===================================================
## ملخص التقدم العام:
===================================================

### المراحل المكتملة بنسبة 100%:
✅ المرحلة الأولى: نظام التتبع اليومي للمناهج
✅ المرحلة الثانية: تطوير نظام التنبيهات المرن للانتقال بين المستويات  
✅ المرحلة الثالثة: تطوير نظام الإشعارات التلقائية

### نسبة الإنجاز الإجمالية: 33% (3 من 9 مراحل)

### الملفات المطورة اليوم:
1. app/Services/DailyCurriculumTrackingService.php ✅
2. database/migrations/2025_06_07_063233_add_daily_tracking_fields_to_student_progress_table.php ✅
3. database/migrations/2025_06_07_064139_create_curriculum_alerts_table.php ✅
4. app/Models/CurriculumAlert.php ✅
5. app/Services/FlexibleCurriculumService.php ✅ (محدث ومطور)
6. app/Services/FlexibleProgressionService.php ✅
7. app/Services/AutomatedNotificationService.php ✅
8. app/Console/Commands/ProcessDailyCurriculumTasks.php ✅
9. app/Console/Commands/ProcessWeeklyCurriculumTasks.php ✅

### التقدم في قاعدة البيانات:
✅ تم تشغيل migration إضافة حقول التتبع اليومي بنجاح
✅ تم تشغيل migration إنشاء جدول curriculum_alerts بنجاح

### المراحل التالية للتطوير:
🔄 المرحلة الرابعة: تطوير API للتكامل مع الموقع الخارجي (التالية)
🔄 المرحلة الخامسة: تطوير آلية المعالجة التلقائية
🔄 المرحلة السادسة: إنشاء واجهات إدارية للمتابعة

===================================================
## الأولوية في التنفيذ:
===================================================

أولوية عالية جداً:
- المرحلة الأولى (نظام تقييم الأداء)
- المرحلة الثانية (آلية الانتقال التلقائي)
- المرحلة الرابعة (API للتكامل)

أولوية عالية:
- المرحلة الثالثة (نظام الإشعارات)
- المرحلة الخامسة (المعالجة التلقائية)

أولوية متوسطة:
- المرحلة السادسة (الواجهات الإدارية)
- المرحلة السابعة (الحالات الخاصة)

أولوية منخفضة:
- المرحلة الثامنة (الاختبار المتقدم)
- المرحلة التاسعة (التوثيق والتسليم)

===================================================
تاريخ آخر تحديث: 7 يونيو 2025 - الساعة 15:45
تم إنجاز 3 مراحل كاملة من أصل 9 مراحل (33% مكتمل)
===================================================
