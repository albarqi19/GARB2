# ملف تتبع مهام تطوير نظام المعلم متعدد الحلقات

## حالة المشروع العامة
- **تاريخ البدء**: 8 يونيو 2025
- **التقدم العام**: 0% (مرحلة التخطيط)
- **الحالة الحالية**: تحليل النظام مكتمل، بدء التطوير
- **المرحلة الحالية**: المرحلة 1 - تصميم قاعدة البيانات

---

## المرحلة 1: تصميم قاعدة البيانات
**المدة المقدرة**: 3-4 أيام
**الحالة**: ⏳ قيد التخطيط

### المهام الفرعية:

#### 1.1 إنشاء جدول pivot للعلاقة many-to-many
- [ ] **تصميم جدول `teacher_circle_assignments`**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 4 ساعات
  - الملفات المطلوبة: migration file
  - الحقول المطلوبة:
    - id (primary key)
    - teacher_id (foreign key)
    - quran_circle_id (foreign key)
    - role (enum: primary, assistant, substitute)
    - is_active (boolean)
    - start_date (date)
    - end_date (date, nullable)
    - salary_percentage (decimal, nullable)
    - notes (text, nullable)
    - created_at, updated_at

- [ ] **إنشاء Migration للجدول الجديد**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 2 ساعة
  - الملف: `create_teacher_circle_assignments_table.php`

#### 1.2 تحديث نماذج قاعدة البيانات
- [ ] **تحليل تأثير التغيير على الجداول الموجودة**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 3 ساعات
  - الجداول المتأثرة:
    - teachers (إزالة quran_circle_id)
    - quran_circles (تحديث العلاقات)
    - teacher_schedules (ربطها بالتكليفات)

- [ ] **إنشاء Migration لتحديث جدول teachers**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 2 ساعة
  - التغييرات: إزالة حقل quran_circle_id

#### 1.3 إنشاء migrations للتغييرات
- [ ] **إنشاء Data Migration لنقل البيانات الحالية**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 4 ساعات
  - الهدف: نقل العلاقات الحالية إلى الجدول الجديد

---

## المرحلة 2: تطوير النماذج والعلاقات
**المدة المقدرة**: 2-3 أيام
**الحالة**: ⏳ في الانتظار

### المهام الفرعية:

#### 2.1 تحديث Teacher Model
- [ ] **إضافة العلاقة many-to-many مع QuranCircles**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 2 ساعة
  - الملف: `app/Models/Teacher.php`

- [ ] **إضافة Accessor للحلقة الأساسية**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 1 ساعة

- [ ] **إضافة Scopes للبحث والفلترة**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 2 ساعة

#### 2.2 تحديث QuranCircle Model
- [ ] **تحديث العلاقة مع Teachers**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 1 ساعة
  - الملف: `app/Models/QuranCircle.php`

#### 2.3 إنشاء نموذج TeacherCircleAssignment
- [ ] **إنشاء Model جديد**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 3 ساعات
  - الملف: `app/Models/TeacherCircleAssignment.php`

---

## المرحلة 3: تطوير الواجهات الإدارية
**المدة المقدرة**: 4-5 أيام
**الحالة**: ⏳ في الانتظار

### المهام الفرعية:

#### 3.1 تحديث TeacherResource
- [ ] **تحديث Form لدعم تعدد الحلقات**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 4 ساعات

- [ ] **تحديث Table columns**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 2 ساعة

#### 3.2 تحديث QuranCircleResource
- [ ] **تحديث RelationManager للمعلمين**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 3 ساعات

#### 3.3 تطوير واجهة إدارة تكليفات المعلمين
- [ ] **إنشاء TeacherCircleAssignmentResource**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 6 ساعات

#### 3.4 تحديث لوحات المعلومات والتقارير
- [ ] **تحديث TeachersByMosqueWidget**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 2 ساعة

---

## المرحلة 4: تطوير منطق العمل
**المدة المقدرة**: 3-4 أيام
**الحالة**: ⏳ في الانتظار

### المهام الفرعية:

#### 4.1 تطوير نظام الرواتب متعدد الحلقات
- [ ] **تطوير منطق حساب الراتب الإجمالي**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 4 ساعات

#### 4.2 تطوير نظام الحوافز والمكافآت
- [ ] **تحديث منطق توزيع الحوافز**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 3 ساعات

#### 4.3 تطوير نظام التقييمات
- [ ] **تطوير تقييم الأداء متعدد الحلقات**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 4 ساعات

#### 4.4 تطوير تقارير الأداء
- [ ] **إنشاء تقارير جديدة**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 3 ساعات

---

## المرحلة 5: تطوير API
**المدة المقدرة**: 2-3 أيام
**الحالة**: ⏳ في الانتظار

### المهام الفرعية:

#### 5.1 تحديث Teacher API endpoints
- [ ] **تحديث /api/teachers**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 2 ساعة

#### 5.2 تحديث QuranCircle API endpoints
- [ ] **تحديث /api/quran-circles**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 2 ساعة

#### 5.3 إنشاء API endpoints للتكليفات
- [ ] **إنشاء /api/teacher-assignments**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 3 ساعات

---

## المرحلة 6: الاختبار والتشغيل
**المدة المقدرة**: 2-3 أيام
**الحالة**: ⏳ في الانتظار

### المهام الفرعية:

#### 6.1 اختبار الوحدة (Unit Testing)
- [ ] **اختبار Teacher Model**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 2 ساعة

- [ ] **اختبار TeacherCircleAssignment Model**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 2 ساعة

#### 6.2 اختبار التكامل (Integration Testing)
- [ ] **اختبار الواجهات الإدارية**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 4 ساعات

#### 6.3 اختبار الأداء
- [ ] **اختبار الاستعلامات الجديدة**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 2 ساعة

#### 6.4 النشر والتشغيل
- [ ] **نشر في بيئة الإنتاج**
  - الحالة: ⏳ لم يبدأ
  - المدة المقدرة: 2 ساعة

---

## ملاحظات التطوير
### مشاكل واجهتها:
*سيتم تحديث هذا القسم أثناء التطوير*

### قرارات التصميم:
*سيتم تحديث هذا القسم أثناء التطوير*

### تحسينات مقترحة:
*سيتم تحديث هذا القسم أثناء التطوير*

---

## إحصائيات المشروع
- **إجمالي المهام**: 31 مهمة
- **المهام المكتملة**: 0 (0%)
- **المهام الجارية**: 0 (0%)
- **المهام المتبقية**: 31 (100%)

## سجل التحديثات
- **8 يونيو 2025**: إنشاء ملف تتبع المهام الأولي
- **المرحلة**: تحليل النظام مكتمل، بدء مرحلة التصميم

---

## رموز الحالة
- ✅ مكتمل
- 🔄 قيد التنفيذ  
- ⏳ لم يبدأ
- ❌ محجوب/مؤجل
- ⚠️ يحتاج مراجعة
