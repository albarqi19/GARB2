# تقرير التقدم في مشروع إدارة مركز تحفيظ القرآن الكريم

تاريخ آخر تحديث: 29 أبريل 2025

## ما تم إنجازه حتى الآن

تم بناء هيكل قاعدة البيانات الأساسي للمشروع والذي يتضمن الأقسام التالية:

### 1. قسم المساجد والحلق القرآنية
- **جدول المساجد (mosques)**:
  - يحتوي على بيانات المساجد مثل الاسم، الحي، الموقع الجغرافي ومعلومات الاتصال.

- **جدول الحلق القرآنية (quran_circles)**:
  - يحتوي على بيانات الحلقات القرآنية وارتباطها بالمساجد.
  - يشمل نوع الحلقة (مدرسة قرآنية، حلقة فردية، لم تبدأ بعد).
  - يشمل الحالة (تعمل، متوقفة، لم تبدأ بعد).
  - يشمل الفترة (عصر، مغرب، عصر ومغرب، كل الأوقات).
  - يشمل روابط التسجيل وروابط المسير.

- **جدول معلمي الحلقات الفردية (individual_circle_teachers)**:
  - يحتوي على بيانات معلمي الحلقات الفردية المرتبطة بالحلقات.
  - يشمل اسم المعلم ورقم التواصل.

### 2. قسم الموظفين والإداريين
- **جدول الموظفين (employees)**:
  - يحتوي على بيانات الموظفين مثل الاسم، رقم الهوية، المسمى الوظيفي.
  - يشمل مركز التكلفة (مكان العمل) ورقم الموظف في نظام الجمعية الرئيسية.
  - يشمل فترات العمل (العصر، المغرب، العشاء).
  - يشمل روابط قرارات التعيين واستمارات التعديل وتصاريح الحلقة.
  - يشمل ملاحظات الفرع والموارد البشرية ومدخلة البيانات.

### 3. قسم المعلمين والمشرفين
- **جدول المعلمين (teachers)**:
  - يحتوي على بيانات المعلمين مثل رقم الهوية، الاسم، الجنسية.
  - يشمل مركز التكلفة (المسجد) والحلقة التي يعمل بها.
  - يشمل المسمى الوظيفي (معلم حفظ، معلم تلقين، مشرف مقيم، مساعد مشرف مقيم).
  - يشمل نوع المهمة (معلم بمكافأة، معلم محتسب، مشرف، مساعد مشرف).
  - يشمل رقم الإيبان ونوع الحلقة ووقت العمل.
  - يشمل عدد الغياب وتفعيل رتل وتاريخ المباشرة وتقييم المعلم.

### 4. قسم الطلاب
- **جدول الطلاب (students)**:
  - يحتوي على بيانات الطلاب مثل رقم الهوية، الاسم، الجنسية، تاريخ الميلاد.
  - يشمل الحلقة التي ينتمي إليها والمسجد والحي.
  - يشمل تاريخ الالتحاق وعدد الغياب وعدد الأجزاء وآخر اختبار.
  - يشمل خطط الحفظ والمراجعة (مجهزة للربط مع جداول الخطط مستقبلاً).
  - يشمل ملاحظات المعلم والمشرف والمركز.
  - يشمل معلومات ولي الأمر والمستوى التعليمي.

### 5. قسم الرواتب والحوافز
- **جدول التقويم الدراسي (academic_calendars)**:
  - يحتوي على بيانات التقويم الدراسي للعام مع تواريخ البداية والنهاية.

- **جدول الفصول الدراسية (academic_terms)**:
  - يحتوي على بيانات الفصول الدراسية لكل عام.

- **جدول الإجازات (holidays)**:
  - يحتوي على بيانات الإجازات والعطل الرسمية.

- **جدول الأيام بدون دوام (non_attendance_days)**:
  - يحتوي على الأيام التي لا يوجد فيها دوام لأسباب خاصة.

- **جدول معدلات الرواتب (salary_rates)**:
  - يحتوي على معدلات الرواتب حسب المسمى الوظيفي والجنسية.
  - يفصل بين معدلات فترات الفجر-العصر-العشاء وفترة المغرب.

- **جدول الحضور (attendances)**:
  - يتتبع حضور المعلمين والموظفين يومياً حسب الفترة.
  - يسمح للمشرفين بتسجيل الحضور والغياب.

- **جدول الرواتب (salaries)**:
  - يحتوي على بيانات الرواتب الشهرية للمعلمين والموظفين.
  - يشمل المبلغ الأساسي والاستقطاعات والمكافآت والمبلغ الإجمالي.

- **جدول تفاصيل الرواتب (salary_details)**:
  - يحتوي على تفاصيل بنود الراتب (أساسي، بدلات، استقطاعات).

- **جدول حوافز الحلقات (circle_incentives)**:
  - يحتوي على المبالغ الإضافية المخصصة للحلقات التي لها داعم.

- **جدول حوافز المعلمين (teacher_incentives)**:
  - يحتوي على توزيع حوافز الحلقات على المعلمين.

### 6. قسم العهد المالية
- **جدول فئات العهد (custody_categories)**:
  - يحتوي على أنواع بنود العهد المالية المسموح بها (حوافز الطلاب، ضيافة، قرطاسية، إلخ).

- **جدول العهد المالية (financial_custodies)**:
  - يحتوي على طلبات العهد المالية وبياناتها الأساسية.
  - يتتبع دورة حياة الطلب (مقدم، تحت المراجعة، معتمد، مرفوض، تم الصرف، تم التسوية).

- **جدول بنود العهد المالية (financial_custody_items)**:
  - يحتوي على بنود العهدة المالية مرتبطة بفئات العهد المسموح بها.

- **جدول فواتير وإيصالات العهد (custody_receipts)**:
  - يحتوي على بيانات الفواتير والإيصالات المرتبطة بصرف العهد المالية.
  - يطبق قواعد التحقق من الفواتير حسب لائحة الصرف.

### 7. قسم الإيرادات والمصروفات
- **جدول أنواع الإيرادات (revenue_types)**:
  - يحتوي على أنواع الإيرادات المختلفة مثل المتجر الإلكتروني، حلق متوفين، مؤسسات مانحة، كبار داعمين، إحسان، الجمعية، مخزون العام السابق، إلخ.

- **جدول الإيرادات (revenues)**:
  - يسجل جميع الإيرادات الواردة سواء للمركز أو للحلقات مع توثيق المبلغ ونوع الإيراد والشهر.
  - يحتفظ بتفاصيل المتبرعين والجهات المانحة.
  - يربط الإيرادات بالحلقات (إذا كانت الإيرادات مخصصة لحلقة معينة) أو بالمركز.

- **جدول أنواع المصروفات (expense_types)**:
  - يحتوي على أنواع المصروفات المختلفة مثل الرواتب، المبادرات، التسويق، مكافآت الحفظة، رواتب المتعاونين، إلخ.

- **جدول المصروفات (expenses)**:
  - يسجل جميع المصروفات سواء للمركز أو للحلقات مع توثيق المبلغ ونوع المصروف والشهر.
  - يحتفظ بتفاصيل المستفيدين والمعاملات.
  - يربط المصروفات بالحلقات (إذا كانت المصروفات مخصصة لحلقة معينة) أو بالمركز.

- **جدول ميزانيات الحلقات (circle_budgets)**:
  - يدير ميزانيات الحلقات لكل فصل دراسي.
  - يقسم الميزانية إلى ميزانية للرواتب وميزانية للمبادرات.
  - يتتبع المبالغ المتبقية في ميزانية كل حلقة.

### 8. قسم طلبات نقل المعلمين
- **جدول طلبات نقل المعلمين (teacher_transfer_requests)**:
  - يحتوي على طلبات نقل المعلمين من حلقة إلى أخرى أو من مسجد إلى آخر.
  - يتضمن معلومات المعلم والحلقة الحالية والحلقة المطلوب النقل إليها.
  - يتضمن سبب النقل وتاريخ الطلب والوقت المفضل بعد النقل.
  - يتتبع حالة الطلب (قيد المراجعة، موافقة مبدئية، موافقة نهائية، مرفوض، ملغي، تم النقل).
  - يحتفظ بمعلومات قرار التعيين وتاريخ النقل الفعلي ومعلومات الموافقة.

- **جدول أنشطة طلبات النقل (teacher_transfer_request_activities)**:
  - يسجل جميع الإجراءات والتحديثات التي تتم على طلب النقل.
  - يوثق المستخدمين الذين قاموا بالإجراءات وأدوارهم.
  - يحتفظ بتاريخ وملاحظات كل نشاط.

### 9. قسم سجل الأنشطة
- **جدول سجل الأنشطة (activity_logs)**:
  - يسجل جميع الأنشطة والإجراءات التي تتم على النظام.
  - يحتفظ بمعلومات المستخدم الذي قام بالنشاط والتاريخ والوقت.
  - يوثق نوع النشاط (إضافة، تعديل، حذف، نقل، إلخ) والقسم المتعلق به.
  - يسجل البيانات القديمة والجديدة للتغييرات التي تمت على السجلات.
  - يحتفظ بوصف تفصيلي للنشاط يوضح ما تم عمله بالضبط.
  - يحفظ معلومات تقنية إضافية مثل عنوان IP وبيانات متصفح المستخدم.

- **سمة تتبع النشاط (HasActivityLog)**:
  - سمة يمكن إضافتها لأي نموذج في النظام لتفعيل التسجيل التلقائي لأنشطته.
  - تسجل تلقائياً عمليات الإضافة والتعديل والحذف للبيانات.
  - تُمكّن من تخصيص رسائل الأنشطة حسب نوع العملية ونوع النموذج.
  - تدعم استبعاد حقول محددة من التسجيل (مثل التواريخ والحقول الحساسة).
  - تسمح بتسجيل أنشطة مخصصة يدوياً عند الحاجة.

### 10. قسم طلبات فتح الحلقات الجديدة
- **جدول طلبات فتح الحلقات (circle_opening_requests)**:
  - يحتوي على بيانات طلبات فتح الحلقات الجديدة.
  - يشمل معلومات مقدم الطلب (الاسم، الجوال، الصلة بالحلقة).
  - يضم معلومات المسجد والحي والموقع.
  - يتضمن تفاصيل الحلقة المطلوبة مثل عدد الطلاب المتوقع وأوقات الحلقة.
  - يحفظ حالة دعم الحلقة وتوفر المعلمين وتاريخ الانطلاق.
  - يتتبع حالة الطلب (جديد، قيد المراجعة، موافق مبدئياً، موافق نهائياً، مرفوض، مكتمل).

- **جدول مراحل طلبات فتح الحلقات (circle_request_stages)**:
  - يتتبع حالة الطلب في كل قسم (التسويق، الإدارية، التعليمية).
  - يسجل تفاصيل مهام كل قسم والمسؤول عن المراجعة.
  - يحفظ ملاحظات كل قسم وتواريخ إكمال المراجعة.
  - يربط الطلب بالحلقة المنشأة عند اكتمال الإجراءات.

- **جدول سجل أنشطة طلبات فتح الحلقات (circle_request_activities)**:
  - يسجل جميع الأنشطة والتغييرات التي تحدث على طلب فتح الحلقة.
  - يوثق القسم المسؤول عن النشاط ونوع النشاط.
  - يحتفظ بالقيم القديمة والجديدة للتغييرات.
  - يسجل معلومات المستخدم الذي قام بالنشاط.

### 11. قسم طلبات احتياج الحلقات
- **جدول طلبات احتياج الحلقات (circle_needs_requests)**:
  - يحتوي على بيانات طلبات احتياج الحلقات للمعلمين والمشرفين.
  - يشمل معلومات الحلقة القرآنية مثل اسم المدرسة والحي والوقت.
  - يضم بيانات الاحتياجات المطلوبة (معلمين، مشرفين، تلقين، تحفيظ، مساعد مشرف).
  - يتضمن بيانات إحصائية عن عدد الطلاب والمعلمين الحاليين.
  - يحفظ حالة الكفالة (متوفر، غير متوفر، جزئي) ووضع المدرسة (متميز، جيد، متوسط، ضعيف، جديدة).
  - يتتبع الإجراء المتخذ على الطلب (قيد المراجعة، تم التنسيق، غير مكتمل، مرفوض، مؤجل، مكتمل).

- **جدول سجل أنشطة طلبات احتياج الحلقات (circle_needs_request_activities)**:
  - يسجل جميع الأنشطة والتغييرات التي تحدث على طلب احتياج الحلقة.
  - يوثق نوع النشاط (إنشاء، تحديث، تغيير حالة، إلخ).
  - يحتفظ بالقيم القديمة والجديدة للتغييرات.
  - يسجل معلومات المستخدم الذي قام بالنشاط.

### 12. قسم إدارة الحلقات الفردية ونظام زيارات المشرفين
- **جدول زيارات المشرفين (supervisor_visits)**:
  - يحتوي على بيانات زيارات المشرفين للحلقات الفردية.
  - يشمل معلومات المشرف والحلقة وتاريخ ووقت الزيارة.
  - يسجل حالة الزيارة (مخطط، تمت الزيارة، ملغية).
  - يحفظ تقييم الحلقة (من 40 درجة) والملاحظات.
  - يتضمن بيانات إحصائية عن عدد الطلاب وعدد الناجحين في الاختبارات.
  - يسجل عدد الأجزاء المحفوظة والمراجعة.
  - يتتبع حالة تفعيل برنامج رتل للتسميع.

- **جدول فترات التقييم (evaluation_periods)**:
  - يحدد فترات التقييم الدوري للحلقات.
  - يشمل اسم الفترة وتاريخ البداية والنهاية.
  - يتتبع حالة الفترة (قادمة، جارية، منتهية).

- **جدول تعيينات المشرفين على الحلقات (circle_supervisors)**:
  - يربط بين المشرفين والحلقات التي يشرفون عليها.
  - يحفظ تواريخ بداية ونهاية التعيين.
  - يسمح بمتابعة التعيينات النشطة وغير النشطة.
  - يحتفظ بملاحظات حول التعيين.

### 13. قسم مؤشرات الأداء التسويقية والإيرادات
- **جدول مؤشرات الأداء التسويقية (marketing_kpis)**:
  - يحتوي على تعريفات مؤشرات الأداء الرئيسية للتسويق.
  - يشمل اسم المؤشر ووصفه ووحدة القياس ودوريته.
  - يحفظ طريقة احتساب المؤشر (تراكمي، متوسط، آخر قيمة).
  - يسجل وزن المؤشر (أهميته النسبية) والقيمة المستهدفة.
  - يمكّن من تفعيل أو تعطيل المؤشرات حسب الحاجة.

- **جدول قيم مؤشرات الأداء (kpi_values)**:
  - يحتفظ بالقيم الفعلية لمؤشرات الأداء على مدار الزمن.
  - يسجل الفترة الزمنية (بداية ونهاية) ووصفها.
  - يحفظ القيمة الفعلية المحققة والقيمة المستهدفة.
  - يحسب نسبة تحقيق المستهدف تلقائياً.
  - يتيح إضافة ملاحظات وتوثيق المستخدم الذي سجل القيمة.

- **جدول أهداف الإيرادات (revenue_targets)**:
  - يحدد المستهدفات الشهرية للإيرادات حسب القناة.
  - يربط المستهدفات بأنواع الإيرادات (متجر إلكتروني، مؤسسات، تحويل بنكي).
  - يتتبع المستهدف والمحقق ونسبة التحقق لكل شهر.
  - يحسب المبلغ المتبقي والمتوسط اليومي المطلوب لتحقيق الهدف.
  - يسمح بإضافة ملاحظات على أهداف الإيرادات.

- **جدول متابعي الفروع (branch_followers)**:
  - يسجل بيانات المتابعين المسجلين من خلال الفروع.
  - يحفظ اسم المتابع وبيانات الاتصال ومصدر التسجيل.
  - يتتبع ما إذا كان المتابع قد أصبح متبرعاً بالفعل.
  - يوثق تاريخ التسجيل والمستخدم الذي قام بالتسجيل.
  - يتيح إضافة ملاحظات على المتابعين.

- **جدول الأنشطة التسويقية (marketing_activities)**:
  - يوثق المنشورات الإعلامية والرسائل للداعمين والتقارير والمشاريع.
  - يسجل تفاصيل النشاط وتاريخه والجمهور المستهدف.
  - يتتبع حالة النشاط (مخطط، قيد التنفيذ، مكتمل، ملغي).
  - يحفظ المنصة المستخدمة وإحصاءات الوصول والتفاعل للمنشورات الإعلامية.
  - يتيح إرفاق ملفات وإضافة ملاحظات على الأنشطة.

### 14. قسم إدارة المهام (Tasks Management)

- **جدول المهام (tasks)**:
  - يحتوي على بيانات المهام المختلفة لجميع أقسام المؤسسة.
  - يشمل عنوان المهمة ووصفها وتاريخ البدء وتاريخ الانتهاء المتوقع.
  - يحدد أولوية المهمة (منخفضة، متوسطة، عالية، عاجلة).
  - يتتبع حالة المهمة (جديدة، قيد التنفيذ، مكتملة، متأخرة، ملغاة).
  - يصنف المهام حسب القسم (التعليمية، التسويق، المالية، الموارد البشرية، عام).
  - يربط المهمة بالمستخدم الذي أنشأها والمستخدم المُسنَد إليه.
  - يوفر علاقات مورفية لربط المهمة بأي نوع من العناصر في النظام (معلم، حلقة، مسجد، مشرف، إلخ).
  - يحفظ نسبة إنجاز المهمة والوسوم المرتبطة بها.
  - يدعم المهام المتكررة مع نمط تكرار قابل للتخصيص.

- **جدول تعليقات المهام (task_comments)**:
  - يحتوي على تعليقات المستخدمين على المهام.
  - يوفر إمكانية إضافة تعليقات داخلية (للمسؤولين فقط) وتعليقات عامة.
  - يدعم تمييز التعليقات التي تشير إلى إجراءات مطلوبة.
  - يوثق المستخدم الذي أضاف التعليق وتاريخ الإضافة.

- **جدول مرفقات المهام (task_attachments)**:
  - يسمح بإرفاق ملفات مختلفة بالمهام (صور، مستندات، عروض تقديمية، جداول بيانات).
  - يحفظ معلومات الملفات مثل الاسم، المسار، النوع، الحجم.
  - يوثق المستخدم الذي أضاف المرفق وتوقيت الإضافة.
  - يوفر وظائف لعرض وحذف المرفقات مع إزالة الملفات الفعلية من التخزين.

- **جدول حالات المهام (task_statuses)**:
  - يتتبع تاريخ تغييرات حالة المهمة.
  - يسجل الحالة السابقة والحالة الجديدة لكل تغيير.
  - يحفظ تعليقات/أسباب تغيير الحالة.
  - يوثق المستخدم الذي قام بتغيير الحالة وتاريخ التغيير.
  - يتتبع نسبة الإنجاز عند كل تغيير في حالة المهمة.

### 15. نظام إدارة ميزانيات الحلقات المتطور

- **جدول إعدادات تكاليف الحلقات (circle_cost_settings)**:
  - يحتوي على معدلات التكلفة الشهرية لمختلف الأدوار في الحلقات القرآنية.
  - يدعم تصنيف التكاليف حسب نوع الدور (معلم، مشرف، مساعد مشرف).
  - يدعم تصنيف التكاليف حسب الجنسية (سعودي، غير سعودي).
  - يدعم تصنيف التكاليف حسب الفترة (فجر، عصر، مغرب، عشاء).
  - يوفر إمكانية تحديد فترة سريان الإعدادات (تاريخ البداية والنهاية).
  - يربط الإعدادات بالفصول الدراسية للتحكم الدقيق.

- **تطوير جدول ميزانيات الحلقات (circle_budgets)**:
  - تمت إضافة حقول لتتبع التكلفة الشهرية للحلقة.
  - تمت إضافة حقول لحساب فترة التغطية المالية المتبقية (بالأشهر).
  - يحدد تاريخ نهاية التغطية المالية المتوقع للحلقة.
  - يدعم تحديد الحلقات المعرضة للخطر المالي (تغطية أقل من 3 أشهر).
  - يحسب الفائض المالي المتاح للحوافز والعهد (المبلغ الزائد عن تغطية 12 شهر).
  - يوفر مؤشرات للحلقات ذات الفائض المالي المتاح.

- **تطوير نظام حوافز الحلقات (circle_incentives)**:
  - تمت إضافة آلية منع صرف الحوافز إذا كانت الحلقة في خطر مالي.
  - تم ربط صرف الحوافز بوجود فائض مالي في ميزانية الحلقة.
  - تم تحسين آلية تتبع المبالغ المتبقية من الحوافز.
  - دعم تحديث حالة جميع الحوافز بناءً على الحالة المالية للحلقات.

### 16. نظام متابعة منشورات التواصل الاجتماعي

- **جدول منشورات التواصل الاجتماعي (social_media_posts)**:
  - يدعم جدولة وتنظيم المنشورات عبر مختلف منصات التواصل الاجتماعي.
  - يحتفظ بمحتوى المنشورات وتصنيفها حسب النوع (مادة إثرائية، تلاوة قرآنية، إنجازات، حملة، إلخ).
  - يتتبع تاريخ النشر بالتقويمين الميلادي والهجري.
  - يدعم تتبع النشر على عدة منصات (تويتر، انستغرام، فيسبوك، تيليجرام، سناب شات، واتساب، يوتيوب).
  - يحتفظ بإحصاءات المنشور (المشاهدات، الإعجابات، التعليقات، المشاركات، الحفظ).
  - يحسب معدل التفاعل ونسبة تحقيق الأهداف بشكل تلقائي.
  - يربط المنشورات بالنشاط التسويقي ومؤشرات الأداء.
  - يدعم تعيين أهداف للتفاعل ومتابعة نسبة تحقيقها.
  - يتيح تصنيف المنشورات حسب حالتها (مجدول، منشور، ملغي، مؤجل).

- **آليات متقدمة لتحليل أداء المنشورات**:
  - حساب إجمالي التفاعلات ومعدل التفاعل تلقائياً.
  - مقارنة أداء المنشورات المختلفة وتحديد الأكثر تفاعلاً.
  - تحليل أي المنصات تحقق أعلى معدل تفاعل.
  - تتبع المنشورات التي حققت أهدافها والتي لم تحققها بعد.
  - توفير إحصائيات شهرية وسنوية عن أداء المنشورات.

- **نظام متكامل لإدارة مراحل المنشورات**:
  - التخطيط للمنشورات وجدولتها مسبقاً.
  - توثيق عملية النشر والروابط على كل منصة.
  - تحديث الإحصاءات وتتبع الأداء بشكل دوري.
  - دعم المراجعة والتحسين المستمر لاستراتيجية المحتوى.

### 17. نظام المهام التسويقية المتطور

- **تطوير جدول المهام التسويقية (marketing_tasks)**:
  - تم تحسين هيكل البيانات لدعم المهام المتكررة والمهام لمرة واحدة.
  - تم إضافة حقول للأولوية والقنوات والفئات.
  - تم تعزيز ربط المهام بأسابيع التسويق لتنظيم أفضل.
  - تم تطوير نظام إدارة المهام حسب اليوم والوقت.

- **جدول أسابيع المهام التسويقية (marketing_task_weeks)**:
  - يتتبع الأسابيع التسويقية مع المعلومات الإحصائية.
  - يحسب نسب إكمال المهام في كل أسبوع.
  - يوفر نظرة عامة على أداء الفريق التسويقي.

- **جدول إكمال المهام التسويقية (marketing_task_completions)**:
  - يحتفظ بسجل مفصل لإكمال المهام حسب الأسبوع.
  - يدعم إضافة ملاحظات وتفاصيل الإنجاز.
  - يسمح بتتبع من قام بإكمال المهمة ومتى.

- **تحسينات على نماذج المهام التسويقية**:
  - إضافة دعم للعلاقات المباشرة بين المهام وأسابيع المهام.
  - تعزيز نظام تتبع الإنجاز والإكمال.
  - تطوير آلية ترحيل البيانات من النظام القديم (JSON) إلى النظام الجديد (علاقات قاعدة البيانات).
  - تحسين أمان وموثوقية التعامل مع معلومات المستخدمين.

- **تطوير نظام إنشاء المهام الافتراضية**:
  - دعم إنشاء مهام أساسية متكررة لتسهيل عمل فريق التسويق.
  - آلية لنسخ المهام المتكررة للأسبوع التالي بشكل تلقائي.

### 18. نظام الخطة الاستراتيجية

- **جدول الخطط الاستراتيجية (strategic_plans)**:
  - يحتوي على بيانات الخطط الاستراتيجية للمركز.
  - يشمل اسم الخطة ووصفها وتواريخ البداية والنهاية.
  - يدعم تفعيل وتعطيل الخطط مع الحفاظ على التاريخ.

- **جدول المؤشرات الاستراتيجية (strategic_indicators)**:
  - يحتوي على مؤشرات الأداء الرئيسية للخطة الاستراتيجية.
  - يدعم أنواع مختلفة من المؤشرات (رقمي، نسبة مئوية).
  - يسمح بتتبع المؤشرات التراكمية وغير التراكمية.
  - يشمل حقول للرموز والأوصاف والقيم المستهدفة والأقسام المسؤولة.

- **جدول عمليات الرصد الاستراتيجي (strategic_monitorings)**:
  - يتتبع قياسات المؤشرات بشكل ربعي على مدار العام.
  - يحسب نسبة تحقق المؤشرات بناء على القيم المتحققة والقيم المستهدفة.
  - يدعم تسجيل ملاحظات على كل عملية رصد.

- **جدول المبادرات الاستراتيجية (strategic_initiatives)**:
  - يحتوي على المبادرات المرتبطة بتحقيق المؤشرات الاستراتيجية.
  - يتتبع حالة المبادرة (مخطط، قيد التنفيذ، مكتمل، متأخر، ملغي).
  - يسجل نسبة التقدم في تنفيذ المبادرة والمسؤول عنها.
  - يحتفظ بتواريخ بدء وانتهاء المبادرة وملاحظات التنفيذ.

- **آليات متقدمة لحساب نسب تحقق المؤشرات**:
  - حساب آلي لنسبة تحقق المؤشرات بناء على طبيعة المؤشر (تراكمي/غير تراكمي).
  - تعامل خاص مع المؤشرات ذات النتيجة النسبية مثل نسب الرضا.
  - حساب نسبة التحقق العامة للخطة الاستراتيجية بناء على مؤشراتها.
  - دعم التقارير الربعية والسنوية لمتابعة تحقق الخطة.

## تقرير تقدم المشروع

### المرحلة 6: تطوير موارد طلبات الخدمة ✅

**تاريخ التنفيذ:** 29 أبريل 2025

#### الخطوة 1: إنشاء موارد طلبات نقل المعلمين (Teacher Transfer Requests) ✅

**الإجراءات المتخذة:**
1. تم إنشاء مورد طلبات نقل المعلمين باستخدام الأمر:
   ```bash
   php artisan make:filament-resource TeacherTransferRequest --panel=admin --generate
   ```
   
2. تم تخصيص المورد بإضافة:
   - الترجمة العربية (طلب نقل معلم، طلبات نقل المعلمين)
   - أيقونة مناسبة (heroicon-o-arrows-right-left)
   - ضبط مجموعة التنقل (طلبات الخدمة) والترتيب
   - تقسيم نموذج الإدخال إلى أقسام منطقية (بيانات المعلم، معلومات النقل، أسباب وملاحظات، حالة الطلب، قرار التعيين)
   - إضافة إجراءات للموافقة أو الرفض أو إكمال الطلب

3. تحسين واجهة العرض وإضافة:
   - شارات ملونة لحالة الطلب (قيد الانتظار، قيد المعالجة، تمت الموافقة، مرفوض، مكتمل)
   - فلاتر متعددة للبحث حسب الحالة وقرار التعيين
   - إجراءات مخصصة للتعامل مع تغييرات حالة الطلب

#### الخطوة 2: إنشاء موارد طلبات فتح الحلقات (Circle Opening Requests) ✅

**الإجراءات المتخذة:**
1. تم إنشاء مورد طلبات فتح الحلقات باستخدام الأمر:
   ```bash
   php artisan make:filament-resource CircleOpeningRequest --panel=admin --generate
   ```
   
2. تم تخصيص المورد بإضافة:
   - الترجمة العربية (طلب فتح حلقة، طلبات فتح الحلقات)
   - أيقونة مناسبة (heroicon-o-plus-circle)
   - ضبط مجموعة التنقل (طلبات الخدمة) والترتيب
   - تقسيم نموذج الإدخال إلى أقسام منطقية (بيانات مقدم الطلب، معلومات المسجد والمنطقة، تفاصيل الحلقة المطلوبة، معلومات إضافية، حالة الطلب)

3. تطوير مدير علاقة أنشطة طلب فتح الحلقة (CircleRequestActivitiesRelationManager) لتتبع أنشطة الطلب

#### الخطوة 3: إنشاء موارد طلبات احتياج الحلقات (Circle Needs Requests) ✅

**الإجراءات المتخذة:**
1. تم إنشاء مورد طلبات احتياج الحلقات باستخدام الأمر:
   ```bash
   php artisan make:filament-resource CircleNeedsRequest --panel=admin --generate
   ```
   
2. تم تخصيص المورد بإضافة:
   - الترجمة العربية (طلب احتياج حلقة، طلبات احتياج الحلقات)
   - أيقونة مناسبة (heroicon-o-clipboard-document-list)
   - ضبط مجموعة التنقل (طلبات الخدمة) والترتيب
   - تقسيم نموذج الإدخال إلى أقسام منطقية (معلومات الحلقة، الاحتياجات المطلوبة، الوضع الحالي، معلومات الطلب)
   - إضافة خيارات متعددة للاحتياجات (معلمين، مشرفين، معلمي تلقين، معلمي تحفيظ، مساعدي مشرفين)

3. تطوير مدير علاقة أنشطة طلب احتياج الحلقة (CircleNeedsRequestActivitiesRelationManager) لتتبع أنشطة الطلب

#### الخطوة 4: تطوير مسارات العمل للطلبات ✅

**الإجراءات المتخذة:**
1. تم تطوير مسارات عمل متكاملة لكل نوع من أنواع الطلبات تتضمن:
   - تحديد خطوات كل طلب من الإنشاء وحتى الإكمال
   - إضافة إجراءات مخصصة لتغيير حالة الطلب (موافقة، رفض، إكمال)
   - تسجيل تاريخ وبيانات كل إجراء يتم على الطلب
   - ربط أنشطة الطلبات بمراحلها

2. تم تمكين متابعة سير العمل من خلال:
   - إظهار شارات ملونة لحالة الطلب الحالية
   - عرض تاريخ كل إجراء (تاريخ الطلب، تاريخ الرد، تاريخ الإكمال)
   - إمكانية إضافة ملاحظات لكل إجراء
   - تسجيل المستخدم الذي قام بالإجراء

**النتائج والإنجازات:**
- تم تطوير 3 موارد رئيسية لإدارة طلبات الخدمة
- تم إنشاء واجهات متكاملة لكل نوع من الطلبات مع ترجمة عربية كاملة
- تم تنظيم جميع الموارد في مجموعة تنقل واحدة (طلبات الخدمة)
- تم ربط الطلبات بالكيانات الأخرى في النظام (المساجد، الحلقات، المعلمين)
- تم تطوير مديري علاقات لتتبع أنشطة الطلبات
- تم إنشاء مسارات عمل كاملة لكل نوع من أنواع الطلبات

**مدراء العلاقات التي تم إنشاؤها:**
1. CircleRequestActivitiesRelationManager - لإدارة أنشطة طلبات فتح الحلقات
2. CircleNeedsRequestActivitiesRelationManager - لإدارة أنشطة طلبات احتياج الحلقات

**تحسينات واجهة المستخدم:**
- استخدام الأقسام (Sections) لتنظيم نماذج الإدخال
- استخدام الشارات الملونة (Badges) لتمييز حالات الطلبات
- إضافة فلاتر متقدمة للبحث في الطلبات
- تنفيذ إجراءات مخصصة لكل نوع من أنواع الطلبات
- ترجمة جميع العناصر إلى اللغة العربية

## العلاقات بين الجداول

تم إنشاء علاقات متكاملة بين جميع الجداول في قاعدة البيانات:
- ربط الحلقات بالمساجد
- ربط المعلمين بالحلقات
- ربط الطلاب بالحلقات والمساجد
- ربط جداول الحضور والرواتب والحوافز بالمعلمين والموظفين
- ربط العهد المالية بالمساجد والمستخدمين
- ربط الإيرادات والمصروفات بالمساجد والحلقات والفصول الدراسية
- ربط ميزانيات الحلقات بالفصول الدراسية والمصروفات
- ربط طلبات نقل المعلمين بالمعلمين والحلقات والمساجد
- ربط سجل الأنشطة بالمستخدمين والنماذج المختلفة في النظام
- ربط طلبات فتح الحلقات بالمساجد الموجودة (إن وجدت)
- ربط سجل مراحل الطلب بطلب فتح الحلقة
- ربط سجل أنشطة الطلب بطلب فتح الحلقة
- ربط مراحل الطلب بالمستخدمين المسؤولين عن المراجعة
- ربط الحلقة المنشأة بطلب فتح الحلقة الأصلي
- ربط طلبات احتياج الحلقات بالحلقات القرآنية والمستخدمين
- ربط سجل أنشطة طلب الاحتياج بطلب الاحتياج والمستخدمين
- ربط الحلقات القرآنية بالمشرفين المعينين عليها
- ربط زيارات المشرفين بالحلقات والمشرفين
- ربط فترات التقييم بزيارات المشرفين
- ربط قيم مؤشرات الأداء بمؤشرات الأداء التسويقية والمستخدمين
- ربط أهداف الإيرادات بأنواع الإيرادات والإيرادات الفعلية المسجلة
- ربط متابعي الفروع بالمستخدمين الذين قاموا بتسجيلهم
- ربط الأنشطة التسويقية بالمستخدمين الذين قاموا بإنشائها
- ربط المهام بالمستخدمين المنشئين والمسندة إليهم
- ربط المهام بتعليقات المهام ومرفقاتها وسجل تغييرات حالاتها
- ربط المهام بعناصر مختلفة من النظام من خلال علاقات مورفية:
  - ربط المهام بالمعلمين
  - ربط المهام بالحلقات القرآنية
  - ربط المهام بالمساجد
  - ربط المهام بمشرفي الحلقات
- ربط إعدادات تكاليف الحلقات بالفصول الدراسية
- ربط ميزانيات الحلقات بإعدادات التكاليف وحساب فترات التغطية المالية
- ربط حوافز الحلقات بالفائض المالي المتاح في ميزانية الحلقة
- ربط منشورات التواصل الاجتماعي بالأنشطة التسويقية ومؤشرات الأداء
- ربط منشورات التواصل الاجتماعي بالمستخدمين (المنشئ والناشر)
- ربط المهام التسويقية بأسابيع المهام التسويقية وسجلات إكمال المهام
- ربط الخطط الاستراتيجية بالمؤشرات الاستراتيجية
- ربط المؤشرات الاستراتيجية بعمليات الرصد
- ربط عمليات الرصد بالمبادرات الاستراتيجية
- ربط المبادرات الاستراتيجية بالمستخدمين المسؤولين عن تنفيذها

## الميزات المنفذة في النماذج (Models)

تم تنفيذ العديد من الميزات المتقدمة في النماذج (Models) مثل:
- حساب عدد أيام الحضور للمعلمين والموظفين
- حساب الرواتب المستحقة بناءً على معدلات الأجور وسجلات الحضور
- إدارة حوافز الحلقات وتوزيعها على المعلمين
- توليد أرقام طلبات فريدة للعهد المالية
- التحقق من صحة الفواتير حسب لائحة الصرف
- متابعة دورة حياة طلبات العهد المالية
- حساب إجمالي الإيرادات والمصروفات للحلقات والمركز
- حساب المبالغ المتبقية من ميزانيات الحلقات
- حساب نسب توزيع الميزانية ونسب الاستهلاك
- تتبع حالة طلبات النقل وإجراءات الموافقة
- تنفيذ نقل المعلمين وتحديث بياناتهم آلياً
- توثيق سجل أنشطة طلبات النقل
- تسجيل جميع الأنشطة على النظام وتوثيقها بالتفصيل
- تخزين القيم القديمة والجديدة للبيانات التي يتم تعديلها
- تتبع المستخدم المسؤول عن كل نشاط في النظام
- إنشاء سجل مراحل تلقائياً عند إنشاء طلب جديد
- تسجيل الأنشطة تلقائياً عند التغييرات المهمة
- تحديث حالة الطلب وحالات القسم مع توثيق التغييرات
- إدارة رابط المتجر وحالة الدعم وتوفر المعلمين
- إنشاء حلقة جديدة تلقائياً بعد الموافقة النهائية
- تسجيل تواريخ الإنجاز والأيام المنقضية منذ التقديم
- توفير وظائف للتعامل مع مختلف مراحل سير العمل
- تسجيل الأنشطة تلقائياً عند إنشاء طلبات احتياج جديدة
- تحديث حالات طلبات احتياج الحلقات وتسجيل التغييرات
- حساب إجمالي الاحتياجات المطلوبة لكل طلب
- إدارة حالات الكفالة وتواريخ الموافقة والإكمال
- حساب متوسط التقييم للحلقات من زيارات المشرفين
- تتبع حالة تفعيل برنامج رتل للتسميع
- عرض الزيارات المخططة والمكتملة والملغية
- حساب نسبة نجاح الطلاب في الاختبارات
- متابعة آخر زيارة إشرافية لكل حلقة
- تحديث حالة فترات التقييم تلقائياً بناءً على التواريخ
- حساب معدل إكمال الزيارات في فترات التقييم
- تتبع المشرفين النشطين على الحلقات
- حساب متوسط وإجمالي قيم المؤشرات للعام الحالي
- حساب نسبة تحقيق المستهدف لقيم المؤشرات وأهداف الإيرادات
- متابعة القيم المحققة والمتبقية لأهداف الإيرادات
- حساب المتوسط اليومي المطلوب لتحقيق الأهداف المتبقية
- متابعة نمو قاعدة بيانات المتابعين وتحولهم إلى متبرعين
- حساب معدل التفاعل للمنشورات الإعلامية
- تتبع المشاريع المطروحة عبر المتجر الإلكتروني والمؤسسات المانحة
- توفير نطاقات استعلام متنوعة لتسهيل تحليل البيانات
- إنشاء وإدارة المهام لمختلف أقسام المؤسسة
- ربط المهام بعناصر مختلفة في النظام من خلال العلاقات المورفية
- تغيير حالة المهام وتسجيل تاريخ التغييرات
- إضافة تعليقات ومرفقات للمهام
- تحديث نسبة إنجاز المهام تلقائيًا
- إسناد المهام لمستخدمين مختلفين
- تتبع المهام المتأخرة والمهام القادمة للأسبوع الحالي
- تصنيف المهام حسب القسم والأولوية
- دعم المهام المتكررة بأنماط مختلفة
- تحديد ما إذا كانت حالة المهمة قد تحسنت أو تراجعت
- حساب التكلفة الشهرية للحلقات بناءً على معلمي الحلقة وإعدادات التكاليف
- حساب عدد أشهر التغطية المالية المتبقية للحلقة
- تحديد الحلقات المعرضة للخطر المالي (تغطية أقل من 3 أشهر)
- حساب الفائض المالي المتاح للحوافز والعهد
- التحقق من إمكانية صرف حوافز إضافية بناءً على الحالة المالية للحلقة
- جدولة منشورات التواصل الاجتماعي وتتبع حالتها
- حساب معدل التفاعل ونسبة تحقيق الأهداف للمنشورات تلقائياً
- تتبع المنشورات حسب المنصات وأنواع المحتوى
- توفير إحصاءات متقدمة عن أداء المنشورات والحملات التسويقية
- تحديد المنشورات الأكثر تفاعلاً والتي تحقق أهدافها
- تسجيل إكمال المهام التسويقية وتحديث نسبة الإنجاز في أسابيع المهام
- إنشاء نسخ من المهام المتكررة للأسبوع التالي تلقائيًا
- ترحيل بيانات إكمال المهام من النظام القديم إلى النظام الجديد
- حساب نسب تحقق المؤشرات الاستراتيجية بناءً على القيم المتحققة والمستهدفة
- دعم المؤشرات التراكمية وغير التراكمية
- التعامل مع المؤشرات النسبية (نسب الرضا، نسب النجاح)
- حساب النسبة العامة لتحقق الخطة الاستراتيجية
- تتبع حالة المبادرات الاستراتيجية ونسب إنجازها
- تحديد المبادرات المتأخرة آليًا

## الخطوات القادمة

1. إنشاء نظام المستخدمين وإدارة الصلاحيات
2. إنشاء موارد Filament لإدارة البيانات من خلال لوحة التحكم
   - تطوير موارد لإدارة طلبات فتح الحلقات الجديدة
   - إنشاء واجهات متخصصة للأقسام المختلفة (التسويق، الإدارية، التعليمية)
   - تطوير واجهات لإدارة طلبات احتياج الحلقات
   - إنشاء واجهات لجدولة وتتبع زيارات المشرفين للحلقات
   - تصميم لوحات إحصائية لتقييم الحلقات وأداء المشرفين
   - تطوير لوحات متابعة لمؤشرات الأداء التسويقية والإيرادات
   - إنشاء تقارير مخصصة عن أداء الأنشطة التسويقية ومعدلات تحقيق الأهداف
   - تطوير واجهات إدارة المهام وتخصيصها حسب الأقسام المختلفة
   - إنشاء لوحات متابعة للمهام والإنذارات للمهام المتأخرة
   - تصميم تقارير إحصائية عن إنجاز المهام وأداء الأقسام والمستخدمين
   - **إنشاء واجهات لإدارة ميزانيات الحلقات وتتبع فترات التغطية المالية**
   - **تطوير لوحات متابعة للحلقات المعرضة للخطر المالي**
   - **بناء منصة متكاملة لإدارة ونشر محتوى التواصل الاجتماعي**
   - **تصميم تقارير أداء المنشورات مع رسوم بيانية تفاعلية**
   - **تطوير واجهة لإدارة المهام التسويقية وتتبع الإنجاز الأسبوعي**
   - **إنشاء لوحة تحكم للخطة الاستراتيجية مع مؤشرات الأداء الرئيسية**
   - **بناء نظام للرصد الربعي للمؤشرات الاستراتيجية**
   - **تطوير واجهة لإدارة وتتبع المبادرات الاستراتيجية**
3. تطوير واجهات المستخدم للمشرفين والمعلمين والإداريين
4. تطوير تقارير ولوحات معلومات للإدارة
5. تطوير نظام إشعارات وتنبيهات
   - إضافة إشعارات للمهام الجديدة المسندة إلى المستخدم
   - إضافة تنبيهات للمهام التي اقتربت مواعيد استحقاقها
   - إرسال إشعارات عند إضافة تعليقات جديدة على المهام
   - إرسال تنبيهات للمهام المتأخرة
   - **إرسال إشعارات للحلقات التي أصبحت في خطر مالي**
   - **تنبيهات لمنشورات التواصل الاجتماعي المجدولة للنشر**
   - **إشعارات بتحقيق أو عدم تحقيق أهداف المنشورات**
   - **تنبيهات بمواعيد المهام التسويقية الأسبوعية**
   - **إشعارات بالمؤشرات الاستراتيجية التي تحتاج مراقبة**
   - **تنبيهات بالمبادرات الاستراتيجية المتأخرة أو التي تقترب مواعيدها**
6. اختبار النظام الشامل
7. إنشاء نسخة تجريبية للمستخدمين