# خطة تطوير نظام المعلم متعدد الحلقات القرآنية

## نظرة عامة
تطوير النظام الحالي لتمكين المعلم من العمل في أكثر من حلقة قرآنية مع اختلاف أوقات الحلقات.

## تحليل النظام الحالي
- **العلاقة الحالية**: Teacher → QuranCircle (one-to-many)
- **المطلوب**: Teacher ↔ QuranCircle (many-to-many) 
- **القيود الحالية**: 
  - حقل `quran_circle_id` في جدول teachers
  - الواجهات الإدارية تدعم حلقة واحدة فقط
  - منطق الرواتب والحوافز مبني على حلقة واحدة

## المراحل الرئيسية

### المرحلة 1: تصميم قاعدة البيانات (3-4 أيام)
#### 1.1 إنشاء جدول pivot للعلاقة many-to-many
#### 1.2 تحديث نماذج قاعدة البيانات
#### 1.3 إنشاء migrations للتغييرات

### المرحلة 2: تطوير النماذج والعلاقات (2-3 أيام)  
#### 2.1 تحديث Teacher Model
#### 2.2 تحديث QuranCircle Model
#### 2.3 إنشاء نموذج TeacherCircleAssignment

### المرحلة 3: تطوير الواجهات الإدارية (4-5 أيام)
#### 3.1 تحديث TeacherResource
#### 3.2 تحديث QuranCircleResource  
#### 3.3 تطوير واجهة إدارة تكليفات المعلمين
#### 3.4 تحديث لوحات المعلومات والتقارير

### المرحلة 4: تطوير منطق العمل (3-4 أيام)
#### 4.1 تطوير نظام الرواتب متعدد الحلقات
#### 4.2 تطوير نظام الحوافز والمكافآت
#### 4.3 تطوير نظام التقييمات
#### 4.4 تطوير تقارير الأداء

### المرحلة 5: تطوير API (2-3 أيام)
#### 5.1 تحديث Teacher API endpoints
#### 5.2 تحديث QuranCircle API endpoints
#### 5.3 إنشاء API endpoints للتكليفات

### المرحلة 6: الاختبار والتشغيل (2-3 أيام)
#### 6.1 اختبار الوحدة (Unit Testing)
#### 6.2 اختبار التكامل (Integration Testing)
#### 6.3 اختبار الأداء
#### 6.4 النشر والتشغيل

## الأدوات والتقنيات المطلوبة
- Laravel Framework
- Filament Admin Panel
- MySQL Database
- PHP Unit Testing
- Laravel Migrations
- Eloquent ORM

## المخاطر المحتملة
1. **تداخل الأوقات**: قد يحدث تعارض في أوقات الحلقات للمعلم الواحد
2. **تعقيد الرواتب**: حساب الراتب من عدة حلقات قد يكون معقداً
3. **أداء النظام**: زيادة التعقيد قد تؤثر على الأداء
4. **تدريب المستخدمين**: الحاجة لتدريب الإداريين على النظام الجديد

## متطلبات ما قبل البدء
- [ ] نسخ احتياطي كامل من قاعدة البيانات
- [ ] إعداد بيئة تطوير منفصلة
- [ ] مراجعة الكود الحالي بشكل كامل
- [ ] تحديد المستخدمين المختبرين

## ملاحظات مهمة
- يجب الحفاظ على التوافق مع النظام الحالي
- ضرورة إجراء اختبارات شاملة قبل النشر  
- توثيق جميع التغييرات والإضافات الجديدة
- إعداد خطة الطوارئ في حالة حدوث مشاكل

## التسليمات المتوقعة
1. قاعدة بيانات محدثة مع العلاقات الجديدة
2. نماذج Laravel محدثة
3. واجهات إدارية محدثة في Filament
4. API endpoints جديدة ومحدثة
5. وثائق فنية شاملة
6. اختبارات آلية
7. دليل المستخدم المحدث

---
**تاريخ الإنشاء**: 8 يونيو 2025
**آخر تحديث**: 8 يونيو 2025
**الحالة**: قيد التخطيط
